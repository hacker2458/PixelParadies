<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fange alle Münzen im Irrgarten</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            text-align: center;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
        }

        header h1 {
            margin: 0;
        }

        #startButton {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        #startButton:hover {
            background-color: #218838;
        }

        #startButton:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        #gameArea {
            position: relative;
            width: 80%;
            height: 80vh;
            background-color: #eee;
            border: 1px solid #ddd;
            overflow: hidden;
            margin: 20px auto;
            max-width: 800px;
            border-radius: 10px;
            background-image: url('tempel.png'); /* Ersetze 'maze.jpg' durch den Pfad zu deinem Irrgartenbild */
            background-size: cover;
            background-position: center;
        }

        .coin {
            width: 30px;
            height: 30px;
            background-image: url('coin.png'); /* Ersetze 'coin.png' durch den Pfad zu deinem Münzbild */
            background-size: cover;
            position: absolute;
            cursor: pointer;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background-image: url('avatar.png'); /* Ersetze 'avatar.png' durch den Pfad zu deinem Avatarbild */
            background-size: cover;
            position: absolute;
        }

        #timer, #score {
            display: inline-block;
            margin: 0 20px;
        }

        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
    </style>
</head>
<body>
    <header>
        <h1>Fange alle Münzen im Irrgarten</h1>
        <button id="startButton">Spiel Starten</button>
        <div id="timer">Zeit: 16</div>
        <div id="score">Punkte: 0</div>
    </header>
    <main id="gameArea">
        <div id="avatar" class="avatar"></div>
    </main>
    <footer>
        <p>&copy; 2024 PixelParadies. Alle Rechte vorbehalten.</p>
    </footer>

    <script>
        const gameArea = document.getElementById('gameArea');
        const startButton = document.getElementById('startButton');
        const timerElement = document.getElementById('timer');
        const scoreElement = document.getElementById('score');

        let avatar;
        let coins = [];
        let score = 0;
        let timer = 16; // Timer auf 20 Sekunden erhöht
        let gameInterval;

        function createCoin() {
            const coin = document.createElement('div');
            coin.classList.add('coin');
            coin.style.top = Math.random() * (gameArea.clientHeight - 30) + 'px';
            coin.style.left = Math.random() * (gameArea.clientWidth - 30) + 'px';
            gameArea.appendChild(coin);
            coins.push(coin);

            coin.addEventListener('click', () => {
                score++;
                scoreElement.textContent = 'Punkte: ' + score;
                gameArea.removeChild(coin);
                coins.splice(coins.indexOf(coin), 1);
                if (score === 5) {
                    endGame('Gewonnen! Du hast alle Münzen gefunden.');
                }
            });
        }

        function createAvatar() {
            if (avatar) {
                gameArea.removeChild(avatar); // Entferne den alten Avatar, wenn einer existiert
            }
            avatar = document.createElement('div');
            avatar.classList.add('avatar');
            avatar.style.top = '50px';
            avatar.style.left = '50px';
            gameArea.appendChild(avatar);
        }

        function moveAvatar(e) {
            const step = 10;
            const gameAreaRect = gameArea.getBoundingClientRect();
            const avatarRect = avatar.getBoundingClientRect();

            let top = parseInt(avatar.style.top);
            let left = parseInt(avatar.style.left);

            switch (e.key) {
                case 'ArrowUp':
                    if (top - step >= 0) top -= step;
                    break;
                case 'ArrowDown':
                    if (top + step <= gameAreaRect.height - avatarRect.height) top += step;
                    break;
                case 'ArrowLeft':
                    if (left - step >= 0) left -= step;
                    break;
                case 'ArrowRight':
                    if (left + step <= gameAreaRect.width - avatarRect.width) left += step;
                    break;
            }

            avatar.style.top = top + 'px';
            avatar.style.left = left + 'px';
            checkCoinCollision();
        }

        function checkCoinCollision() {
            coins.forEach(coin => {
                const coinRect = coin.getBoundingClientRect();
                const avatarRect = avatar.getBoundingClientRect();

                if (avatarRect.left < coinRect.right &&
                    avatarRect.right > coinRect.left &&
                    avatarRect.top < coinRect.bottom &&
                    avatarRect.bottom > coinRect.top) {
                    score++;
                    scoreElement.textContent = 'Punkte: ' + score;
                    gameArea.removeChild(coin);
                    coins.splice(coins.indexOf(coin), 1);
                    if (score === 5) {
                        endGame('Gewonnen! Du hast alle Münzen gefunden.');
                    }
                }
            });
        }

        function startGame() {
            score = 0;
            timer = 16; // Timer auf 20 Sekunden zurücksetzen
            scoreElement.textContent = 'Punkte: ' + score;
            timerElement.textContent = 'Zeit: ' + timer;

            // Entferne alle vorhandenen Münzen und den Avatar
            coins.forEach(coin => gameArea.removeChild(coin));
            if (avatar) gameArea.removeChild(avatar);
            coins = [];

            // Setze den Avatar in die Ausgangsposition
            createAvatar();

            // Timer-Logik
            gameInterval = setInterval(() => {
                timer--;
                timerElement.textContent = 'Zeit: ' + timer;
                if (timer <= 0) {
                    endGame('Zeit abgelaufen! Versuch es nochmal.');
                }
            }, 1000);

            // Erstelle neue Münzen
            for (let i = 0; i < 5; i++) {
                createCoin();
            }

            // Event-Listener für die Pfeiltasten
            document.addEventListener('keydown', moveAvatar);
        }

        function endGame(message) {
            clearInterval(gameInterval);
            alert(message);
            startButton.disabled = false;
            document.removeEventListener('keydown', moveAvatar);
        }

        startButton.addEventListener('click', () => {
            startButton.disabled = true;
            startGame();
        });
    </script>
</body>
</html>
